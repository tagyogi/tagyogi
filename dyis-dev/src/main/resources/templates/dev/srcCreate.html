<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="/layout/basicLayout">
	<body>
		<script th:inline="javascript">
			/*<![CDATA[*/
			$(document).ready(function(){
				//화면 초기화 부분
				//버튼기능 처리
				
				/*
				//테이블생성 처리
				fnCreatTbl = function (rowId) {
					var rowCnt = $("#jqGridDtl").getGridParam("reccount");
					
					if(rowCnt == 0){ alert("컬럼 정보가 존재하지 않습니다."); return; }
					
					if(confirm("테이블 생성 처리 하시겠습니까?")){
						$("#jqGrid").jqGrid('restoreRow',lastSelection); //에디터 비활성화
						
						var rowData = $("#jqGrid").jqGrid("getRowData", rowId);
						com.fnAjaxDef("/dev/createTblProc.do", rowData, function() { $("#btn_search").trigger("click"); });
					}
				}
				
				//테이블생성 삭제 처리
				fnDel = function (rowId) {
					if(confirm("삭제 하시겠습니까?")){
						$("#jqGrid").jqGrid('restoreRow',lastSelection); //에디터 비활성화
						
						var rowData = $("#jqGrid").jqGrid("getRowData", rowId);
						com.fnAjaxDef("/dev/deleteDevDbProc.do", rowData, function() { $("#btn_search").trigger("click"); });
					}
				}
				 
				//그리드 옵션(마스터 버튼 옵션)
				fnGridBtn = function(cellVal, opt, rowObj) {
					//console.log(rowObj)
					var html = "";
					html += "<a href='javascript:fnCreatTbl("+opt.rowId+");' class='btnG style03' >생성</a>";
					if(rowObj.tblAt == 0){
						html += "<a href='javascript:fnDel("+opt.rowId+");' class='btnG style01' >삭제</a>";
					}
					return html;
				}
				
				
				// 그리드 이벤트 ##############################################################################################
				//그리드 생성
				colModel = [
					{ label: '상태', name: 'status', hidden:true },
					{ label: 'seq', name: 'seq', width: 60, align:'center', key: true },
					{ label: '관리번호', name: 'tblSn', hidden:true },
			        { label: '테이블명', name: 'tblNm', width: 100, align:'center', editable:true, editrules:{required:true} },
			        { label: '테이블설명', name: 'tblCmt', width: 120, align:'center', editable:true, editrules:{required:true} },
			        { label: '생성여부', name: 'tblAt', width: 50, align:'center', formatter:'select'
			        	, editoptions:{value:"0:미생성;1:생성"} 
			        },
			        { label: '처리', name: 'btn', width: 60, align:'center', formatter: fnGridBtn },
			        { label: '백업테이블여부', name: 'tblBakAt', hidden:true }
			    ]
				//그리드 생성
				comGrid.createDef($("#jqGrid"), colModel); 
				
				//더블클릭
				$("#jqGrid").bind("jqGridDblClickRow", function (obj, iRow, iCol, e) {
					comGrid.rowEdit($("#jqGrid"), iRow, ["tblSn"]); //에이터 활성화
				});
				
				//클릭
				$("#jqGrid").bind("jqGridCellSelect	", function (obj, iRow, iCol, e) {
					//선택시 
					if(iCol == 3){
						var rowData = $("#jqGrid").jqGrid("getRowData", iRow);
						
					}
				});
				
				//그룹조회 처리
				fnGridSearch = function (){
					
					$("#jqGrid")[0].grid.beginReq();
					
					var param = $("#frm").serializeObject();
					//com.fnAjaxDef("/dev/selectDevDbMasList.do", param, fnGridSearchCallBack);
				}
				
				//그룹조회 콜백
				fnGridSearchCallBack = function(result){
					comGrid.dataSet($("#jqGrid"), result); //결과 세팅
				}
				*/
				
				//생성 완료
				fnSrcCreateCallBack = function (){
					
					
				}
				
				//소스생성
				fnSrcCreate = function(srcType){
					//세션 체크
					if(!com.fnSessChk()){
						alert("세션이 만료되었습니다.");
						top.location.href = "/";
						return;
					}
					//필수체크
					var valChks = ["srcJobNm", "srcFileNm", "jobContent"];
					
					if(com.fnValChk(valChks)){
						if(confirm("생성 처리 하시겠습니까?")){
							$("#srcType").val(srcType);
							var param = $("#frm").serializeObject();
							
							com.fnAjaxDef("/dev/devSrcCreatePrcs.do", param, fnSrcCreateCallBack);	
						}
					}	
				}
				//최초 조회
				//fnGridSearch();
				
		    });
		    /*]]>*/
		    
		</script>
		
		<!-- FORM 영역 -->
		<form name="frm" id="frm" onsubmit="return false;" enctype="multipart/form-data">
		<input type="hidden" name="srcType" id="srcType"/>
		
		<!-- 콘텐츠 시작 -->
		<div class="contentsArea">
			<div class="contentsTop">
				<h2 id="menuTitle">[[${menuNm}]]</h2>
				<ul class="function_menu_area">
					<!--
					<li><button type="button" class="button btnMid gray_gradation">변경등록</button></li>
					<li><button type="button" class="button btnMid gray_gradation">기재변경</button></li>
					<li><button type="button" class="button btnMid gray_gradation">입력</button></li>
					<li><button type="button" class="button btnMid gray_gradation">수정</button></li>
					<li><button type="button" class="button btnMid gray_gradation">삭제</button></li>
					<li><button type="button" class="button btnMid gray_gradation">상세보기</button></li>
					-->
				</ul>
				
				<ul class="page_menu_area">
					<!--
					<li><button type="button" class="btn_bookmark">bookmark</button></li>
					<li><button type="button" class="btn_print">print</button></li>
					<li><button type="button" class="btn_excel">excel</button></li>
					<li><button type="button" class="btn_refresh">refresh</button></li>
					<li><button type="button" class="btn_delete">delete</button></li> -->
				</ul>
			</div><!-- //contentsTop -->
	
			<div class="contents flex">
				<!-- 검색 부분 -->
				<section class="searchArea mt10">
					<div class="row">
						<dl>
							<dt>테이블명</dt>
							<dd style="width:130px;">
								<input type="text" name="sTblNm" id="sTblNm" style="width:150px;">
							</dd>
						</dl>
						<dl>
							<dt>테이블ID</dt>
							<dd style="width:130px;">
								<input type="text" name="sTblId" id="sTblId" style="width:150px;">
							</dd>
						</dl>
					</div><!-- //row -->
					
					<div class="searchBtn">
						<a href="javascript:;" class="btn search">조회</a>
					</div>
				</section>
				<!-- 검색 부분 끝 -->
				<div class="layer-flex mt20">
					
					
					<!-- 그리드 좌측 부분 -->
					<div class="" style="width:48%">
						
						<!-- 그리드 상단 부분 끝 
						<div class="mt10">
					    	<table id="jqGrid"></table>
					    	<div id="jqGridPager"></div>
						</div>
						-->
						<section class="area">
							<div class="fl">
								<h4 class="title">기본경로</h4>
							</div>
							
						</section>
						<table class="tbl">
							<colgroup>
								<col style="width:100px;">
								<col style="">
							</colgroup>
							<tbody>
								<tr>
									<th>샘플</th>
									<td><input type="text" id="srcSample" name="srcSample" style="width: 100%" value="D:/project/KOCFC_2023/workspace/kocfc/ddc-dev/src/main/java/ddc" readonly="readonly"></td>
								</tr><!-- //tr -->
								<tr>
									<th>관리자</th>
									<td><input type="text" id="srcWebAdm" name="srcWebAdm" style="width: 100%" value="D:/project/KOCFC_2023/workspace/kocfc/ddc-adm/src/main/java/ddc/web" readonly="readonly"></td>
								</tr><!-- //tr -->
								<tr>
									<th>홈페이지</th>
									<td><input type="text" id="srcWebHome" name="srcWebHome" style="width: 100%" value="D:/project/KOCFC_2023/workspace/kocfc/ddc-home/src/main/java/ddc/web" readonly="readonly"></td>
								</tr><!-- //tr -->
								<tr>
									<th>비즈니스로직</th>
									<td><input type="text" id="srcBiz" name="srcBiz" style="width: 100%" value="D:/project/KOCFC_2023/workspace/kocfc/ddc-biz/src/main/java/ddc/biz" readonly="readonly"></td>
								</tr><!-- //tr -->
								<tr>
									<th>뷰페이지</th>
									<td><input type="text" id="srcView" name="srcView" style="width: 100%" value="D:/project/KOCFC_2023/workspace/kocfc/ddc-adm/src/main/resources/templates" readonly="readonly"></td>
								</tr><!-- //tr -->
							</tbody>
						</table><!-- //tbl -->
					</div>
					<!-- 그리드 좌측 부분 끝 -->
						
					<!-- 그리드 우측 부분 -->
					<div style="width: 49%;">
						
						
						<section class="area">
							<div class="fl">
								<h4 class="title">생성정보</h4>
							</div>
							<div class="fr">
								<a href="javascript:fnSrcCreate('adm');" class="btn style01">생성(관리자)</a>
								<a href="javascript:fnSrcCreate('home');" class="btn style01">생성(홈페이지)</a>
							</div>
						</section>
						<table class="tbl">
							<colgroup>
								<col style="width:120px;">
								<col style="">
							</colgroup>
							<tbody>
								<tr>
									<th>*패키지명(고정)</th>
									<td><input type="text" id="srcPackage" name="srcPackage" style="width:25%" value="ddc" maxlength="10" title="패키지명">&nbsp; ex) com.dongyangis</td> 
								</tr><!-- //tr -->
								<tr>
									<th>*업무폴더명</th>
									<td><input type="text" id="srcJobNm" name="srcJobNm" style="width: 20%" value="user" maxlength="10" title="업무폴더명"></td>
								</tr><!-- //tr -->
								<tr>
									<th>*파일주어명</th>
									<td><input type="text" id="srcFileNm" name="srcFileNm" style="width: 25%" value="user" maxlength="20" title="파일주어명"></td>
								</tr><!-- //tr -->
								<!--
								<tr>
									<th>처리로직</th>
									<td>
										현황&nbsp;<input type="checkbox" name="procList" id="procList" value="1" checked> 
										상세&nbsp;<input type="checkbox" name="procDtl" id="procDtl" value="1" checked> 
										행처리&nbsp;<input type="checkbox" name="procRow" id="procRow" value="1">
										등록&nbsp;<input type="checkbox" name="procIns" id="procIns" value="1" checked>
										수정&nbsp;<input type="checkbox" name="procUpt" id="procUpt" value="1" checked>
										삭제&nbsp;<input type="checkbox" name="procDtl" id="procDtl" value="1" checked>										
									</td> 
								</tr>
								-->
								<tr>
									<th>테이블명</th>
									<td><input type="text" id="srcTblNm" name="srcTblNm" style="width: 25%" value="TB_USER" maxlength="20" title="테이블명"></td>
								</tr><!-- //tr -->
								<tr>
									<th>*업무명</th>
									<td><input type="text" id="jobContent" name="jobContent" style="width: 25%" value="" maxlength="50" title="업무명"></td>
								</tr><!-- //tr -->
								<tr>
									<th>리스트현황유형</th>
									<td><input type="radio" name="viewList" id="viewList" value="1" checked>&nbsp;그리드1개&nbsp;&nbsp;
									<input type="radio" name="viewList" id="viewList" value="2">&nbsp;그리드2개&nbsp;&nbsp;
									<input type="radio" name="viewList" id="viewList" value="3">&nbsp;그리드(등록폼)&nbsp;&nbsp;
									<input type="radio" name="viewList" id="viewList" value="4">&nbsp;그리드(조회)&nbsp;&nbsp;
									<input type="radio" name="viewList" id="viewList" value="5">&nbsp;미생성&nbsp;&nbsp;
									</td>
								</tr><!-- //tr -->
								<tr>
									<th>생성화면</th>
									<td>
										<input type="checkbox" name="viewCont" id="viewCont" value="1" checked>&nbsp;Controller&nbsp;&nbsp;
										<input type="checkbox" name="viewServ" id="viewServ" value="1" checked>&nbsp;Service&nbsp;&nbsp;
										<input type="checkbox" name="viewMapr" id="viewMapr" value="1" checked>&nbsp;Mapper&nbsp;&nbsp;
										<input type="checkbox" name="viewLst" id="viewLst" value="1" checked>&nbsp;현황&nbsp;&nbsp;
										<input type="checkbox" name="viewIns" id="viewIns" value="1">&nbsp;등록&nbsp;&nbsp;
										<input type="checkbox" name="viewUpt" id="viewUpt" value="1">&nbsp;수정&nbsp;&nbsp;
										<input type="checkbox" name="viewDtl" id="viewDtl" value="1">&nbsp;상세&nbsp;&nbsp;
									</td>
								</tr><!-- //tr -->
							</tbody>
						</table><!-- //tbl -->
					</div>
					<!-- 그리드 우측 부분 끝 -->
	
	
					<div class="mt10">
				    	
					</div>
					<!-- END 컨텐츠 영역 -->
				</div>
			</div><!-- //contents -->
		</div><!-- //contentsArea -->
		</form>
	</body>
</html>