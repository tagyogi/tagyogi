<!--
	시스템구분 : 홈페이지
	파일정보 : guarAcciList.html
	파일명 : guarAcciList.html
	업무명 : 공제금신청현황
	생성자 : 변성균
	생성일 : 2023.08.11
-->
<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" xml:lang="ko">

	<script th:inline="javascript">
		/*<![CDATA[*/
		var codeList = /*[[${codeList}]]*/ //공통코드
		var accNo = /*[[${paramMap.accNo}]]*/ //사고번호
		var accStat = /*[[${paramMap.accStat}]]*/ //사고상태
		var acciBizNo = /*[[${paramMap.acciBizNo}]]*/  //피공제자 사업자번호

		//화면 초기화 처리 호출
		$(document).ready(function(){
			//lnb 세팅함수
			fnPageLnbSet(/*[[${menuInfo}]]*/, '공제금신청'); //lnb세팅

			/*com.fnCodeSelectBox("AC07", "sAccStatCd", 1, ""); //사고상태

			//달력
			//from to
			com.fnDateFromTo("ele_dateDt", "sClaimStaDt", "sClaimEndDt"); //시작~종료 달력
			$("#btn_Dt").click(function(){ com.fnDateCalVisible($("#ele_dateDt"));  }); //달력버튼처리
			$("#sClaimStaDt, #sClaimEndDt").val("");*/


			//조회
			fnSerch();
		});

		var fnSerch = function(){

			obj = {url:"/acciGuar/selectAcciGuarReq.do", formId:"serchFrm", callBack:fnSerchCallBack, msgYn:"N", sessYn:"N", loadYn:"Y"};
			com.fnAjaxPost(obj);

		}

		//조회 콜백
		var fnSerchCallBack = function(resData){
			//console.log(resData);
			com.fnSetKeyVal(resData.acciReq);

			//금액 콤마 일괄적용
			$.each($(".setCommaCls"), function(idx,item){
				$(item).text($(item).text() === null ? "0":com.aprojomma($(item).text()));
				$(item).val($(item).val() === null ? "0":com.aprojomma($(item).val()));
			});

			$.each($(".setDateCls"), function(idx,item){
				$(item).text($(item).text() === null ? "-":com.fnDateFormat($(item).text()));
				$(item).val($(item).val() === null ? "-":com.fnDateFormat($(item).val()));
			});


		}

		//취소
		var fnCancel = function(){
			if(!confirm("등록된 공제금신청정보를 취소하시겠습니까?")) return;

			var param = $("#serchFrm").serializeObject();
			//console.log(param);
			obj = {url:"/acciGuar/deleteAcciGuarMaster.do", callBack:fnCancelCallBack, param:param, msgYn:"Y", sessYn:"Y", loadYn:"Y" };
			com.fnAjaxDef(obj);
		}

		var fnCancelCallBack = function(resData){
			fnRepage();
		}

		//목록으로
		var fnRepage = function(){
			var param = {};
			param.acciBizNo = acciBizNo;

			fnPage('2030504', param);

		}

		/*]]>*/
	</script>
        <div class="main-top sub">
			<ul class="inner">
                <li class="move1"></li>
                <li class="move2"></li>
                <li class="move3"></li>
                <li class="move4"></li>
                <li class="move5"></li>
            </ul>
        </div>
        <div class="content-wrap">
            <div class="inner">
                <div class="content-box flex-box jc-between">
                    <!-- 업무 안내 영역 -->
                    <div id="lnb" class="lnb-wrap">
                        <h3 class="ko-bold h3-txt"></h3>

                    </div>

                    <!-- 업무 안내 영역 끝 -->
                    <div class="content-main">
						<!-- 경로 영역 시작 -->
                        <div th:insert="~{/fragments/subTitle}"></div>
                        <!-- 경로 영역 끝 -->
                        <form name="serchFrm" id="serchFrm" onSubmit="return false">
						<input type="hidden" th:name="_csrf" th:value="${_csrf?.token}"/>
						<input type="hidden" name="signedCont" id="signedCont" value=""/>
						<input type="hidden" name="accNo" id="accNo"th:value="${paramMap.accNo}"/>
						<input type="hidden" name="sOrderBizNo" id="sOrderBizNo" th:value="${paramMap.acciBizNo}">
						<!--피공제자명도 상세에 넘겨야하는지 확인필요-->
						<!--<input type="hidden" name="sOrderBizNo" id="sOrderBizNo" th:value="${paramMap.sOrderBizNo}">-->
                        <section id="content" class="content">
                            <!-- 여기서부터 content -->
                            <div>
                                <article>
	                                <p class="title-dept1">보증정보</p>
	                                <div class="table-wrap info">
	                                    <div class="table-scroll">
	                                        <table width="100%">
												<colgroup>
	                                                <col width="12%">
	                                                <col width="21%">
	                                                <col width="12%">
	                                                <col width="21%">
	                                                <col width="12%">
	                                            	<col width="*">
	                                            </colgroup>
	                                            <tbody>
	                                                <tr>
	                                                    <th>사고증권번호</th>
	                                                    <td colspan="3"><div id="ele_accDocNo"></div></td>
	                                                    <th >발급일자</th>
	                                                    <td><div id="ele_guarPubDt" class="setDateCls"></div></td>
	                                                </tr>
	                                                <tr>
	                                                    <th >보증종류</th>
	                                                    <td colspan="3"><div id="ele_guarTypeNm"></div></td>
														<th >처리상태</th>
	                                                    <td><span id="ele_accStatCdNm" class=""></span></td>
	                                                </tr>
	                                                <tr>
	                                                    <th>보증기간</th>
	                                                    <td colspan="3">
															<span id="ele_guarBegDt" class="setDateCls"></span> ~ <span id="ele_guarExpDt" class="setDateCls"></span>
														</td>
	                                                    <th >보증금액</th>
	                                                    <td><span id="ele_guarAmt" class="setCommaCls"></span></td>
	                                                </tr>
	                                                <tr>
	                                                    <th>계약건명</th>
	                                                    <td colspan="3"><div id="ele_servNm"></div></td>
	                                                    <th >피공제기관</th>
	                                                    <td><div id="ele_orderNm"></div></td>
	                                                </tr>
	                                            </tbody>
	                                        </table>
	                                    </div>
	                                </div>
	                            </article>

	                            <!--청구정보-->
	                            <article>
	                                <p class="title-dept1">청구정보</p>
	                                <div class="table-wrap info">
	                                    <div class="table-scroll">
	                                        <table width="100%">
												<colgroup>
	                                                <col width="12%">
	                                                <col width="21%">
	                                                <col width="12%">
	                                                <col width="21%">
	                                                <col width="12%">
	                                            	<col width="*">
	                                            </colgroup>
	                                            <tbody>
	                                                <tr>
	                                                    <th>청구일자</th>
	                                                    <td colspan="3"><div id="ele_claimDt" class=""></div></td>
	                                                    <th >청구금액</th>
	                                                    <td><div id="ele_claimAmt" class="setCommaCls"></div></td>
	                                                </tr>
	                                                <tr>
	                                                    <th>신청(담당)자명</th>
	                                                    <td colspan="3"><div id="ele_accReqNm"></div></td>
	                                                    <th >연락처</th>
	                                                    <td><div id="ele_accReqTel"></div></td>
	                                                </tr>
	                                                <tr>
	                                                    <th>청구내용</th>
	                                                    <td colspan="5"><div id="ele_claimCont"></div></td>
	                                                </tr>
	                                            </tbody>
	                                        </table>
	                                    </div>
	                                </div>
	                            </article>

	                            <!--공제금수령정보-->
	                            <article>
	                                <p class="title-dept1">공제금수령정보</p>
	                                <div class="table-wrap info">
	                                    <div class="table-scroll">
	                                        <table width="100%">
												<colgroup>
	                                                <col width="12%">
	                                                <col width="21%">
	                                                <col width="12%">
	                                                <col width="21%">
	                                                <col width="12%">
	                                            	<col width="*">
	                                            </colgroup>
	                                            <tbody>
	                                                <tr>
	                                                    <th>입금방법</th>
	                                                    <td colspan="3"><div id="ele_payWayNm"></div></td>
	                                                    <th>예금주</th>
	                                                    <td><div id="ele_payNm"></div></td>
	                                                </tr>
	                                                <tr>
	                                                    <th>입금은행</th>
	                                                    <td colspan="3"><div id="ele_payBankNm"></div></td>
	                                                    <th >입금계좌</th>
	                                                    <td><div id="ele_payAcct"></div></td>
	                                                </tr>
	                                            </tbody>
	                                        </table>
	                                    </div>
	                                </div>
	                            </article>

	                            <div class="btn-wrap flex-box jc-center gap-15">
                                	 <th:block th:if="${#strings.equals(paramMap.accStat,'10')}">
			                            <button type="button" class="btn-color sub-btn2" onclick="fnCancel();">취소</button>
		                            </th:block>
                                	<button type="button" class="btn-white sub-btn2" onclick="fnRepage();">목록</button>
                            	</div>
                            </div>
                        </section>
                        </form>
                    </div>
                </div>
            </div>
        </div>
</html>