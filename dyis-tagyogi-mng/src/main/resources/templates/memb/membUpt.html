<!--
	파일정보 : memb/membIns.html
	파일명 : memb
	업무명 : memb등록, 수정
	생성자 : 김상민
	생성일 : 2023-04-10
-->
<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="/layout/subLayout">
	<body>
		<script th:inline="javascript">
			/*<![CDATA[*/
			var codeList = /*[[${codeList}]]*/; //공통코드
			var gridColList = /*[[${gridColList}]]*/; //그리드옵션
			var gridOptList = []; //그리드옵션
			//var initParam = {codeList : "CRET:MB02:MB07:MB08:CM04:MB23:MB24:CM02:MB26", gridNoList : "10110:10111"}

			var addrPopGubun = "";	//주소팝업 클릭 구분값

			//컬럼 저장시 전화번호 형식으로 저장 및 그리드 생성시 전화번호 타입으로 변환 같이쓰려고 전역변수로 설정
			var ceoTelFormatCols = ["ceoTelNo", "ceoCellNo"];		//(대표자)전화번호 컬럼
			var persTelFormatCols = ["persTelNo", "persFaxNo", "persCellNo"];	//(담당자)전화번호 컬럼

			//초기화 조회 콜백
			$(document).ready(function(){

				//보조장르 클릭 이벤트(selectBox가 화면 그려지고 생성되어 document로 접근)
				$(document).on("click", "input[name=subBussCds]", function(e){
					//주장르, 보조장르 같을때
					if($(this).val() === $("#mainBussCd").val()){
						e.preventDefault();
						alert("주장르와 보조장르는 중복입력될 수 없습니다.");
		                return;
					}
					//기타 체크됬을때
					if($(this).val() === "14")	$("#bussEtc").prop("disabled", !$(this).is(":checked"));
				});

				//주장르 클릭 이벤트??
				$("#mainBussCd").on({
					//클릭했을때 이벤트
					click: function(){
						bfClickVal = $(this).val();	//select 박스 클릭시 최초값 저장
					},

					//변경했을때 이벤트
					change: function(){
						var selectVal = $(this).val();
						$("input[name=subBussCds]:checked").each(function(){
							if(selectVal === $(this).val()){
								$("#mainBussCd").val(bfClickVal);	//변경전 값으로 변경
								alert("주장르와 보조장르는 중복입력될 수 없습니다.");
				                return;
							}
						});
					}
				});

				//selectBox
				com.fnCodeSelectBox("CRET", "membCretop", 1, "", "1");	//조기경보
				com.fnCodeSelectBox("MB08", "membStat", 1, "");		//조합원상태
				com.fnCodeSelectBox("MB07", "membDiv", 1, "");		//조합원구분
				com.fnCodeSelectBox("MB02", "mainBussCd", 1, "");	//주장르
				com.fnCodeSelectBox("MB23", "postGetCd", 1, "");	//우편수령처
				com.fnCodeSelectBox("MB24", "membCd", 0, "");		//조합원형태
				com.fnCodeSelectBox("CM02", "bankCd", 1, "");		//거래은행
				com.fnCodeSelectBox("CM04", "dept", 1, "");			//부서
				com.fnCodeSelectBox("MB26", "sactCd", 0, "");		//제재여부

				com.fnCodeCheckBox("MB02", "span_subBussCds", "subBussCds", false); //보조장르

				//파일첨부
				ibUploadInit.limitFileExt = "gif,jpg,jpeg,png,GIF,JPG,JPEG,PNG"; //확장자 설정(이미지 파일만)
				com.fnIbsUploadOne($("#docFileCS"));
				com.fnIbsUploadOne($("#docFilePS"));

				//IBsheet 초기화
				com.fnIbsInit(/*[[${menuInfo.workGrid}]]*/);

				//대표자정보 초기 데이터 설정
				var hideCeoColNms = ["membNo", "ceoSeq", "ceoAddr1", "ceoAddr2", "doroCd", "doroNm", "doroBunho", "doroDong", "doroBdNo", "ceoPostNo"];	//숨겨질 컬럼들
				fnMakeModOpt(gridOptList[0].Cols, hideCeoColNms, ceoTelFormatCols);	//그리드양식 수정 양식(수정가능, 컬럼 다 보이기)으로 변경
				$.each(gridOptList[0].Cols, function(idx, item){
					if(item.Name === "addrDiv"){ //주소구분변경시
						item.OnChange= fnAddrDivCng; //선택 컨트롤러 추가
					}
				});
			    IBSheet.create({ id: "sheetCeo", el: "sheetDivCeo", options: gridOptList[0] });

			    //담당자정보 초기 데이터 설정
			    var hidePersColNms = ["membNo", "persSeq", "persPosStat"];		//숨겨질 컬럼들
			    fnMakeModOpt(gridOptList[1].Cols, hidePersColNms, persTelFormatCols);	//그리드양식 수정 양식(수정가능, 컬럼 다 보이기)으로 변경
			    IBSheet.create({ id: "sheetPerson", el: "sheetDivPerson", options: gridOptList[1] });

				//계좌목록
				//var hideAccColNms = ["membNo", "membNm"];		//숨겨질 컬럼들
			    //fnMakeModOpt(gridOptList[2].Cols, hideAccColNms);	//그리드양식 수정 양식(수정가능, 컬럼 다 보이기)으로 변경
				IBSheet.create({ id: "sheetAcc", el: "sheetDivAcc", options: gridOptList[2] });

			    //시트 생성 이후
			    IBSheet.onRenderFirstFinishAll = function(obj){
					fnSearchGrid(); //조회 호출
				};

				//sheetCeo 원클릭 처리
				sheetCeo.bind("onAfterClick" , function(obj) { //원클릭
					if(obj.kind === "Filter") return;
					var rowData = this.getFocusedRow(); //생성된 행 정보 가져오기

					//삭제상태변경
					if(obj.col === "delChk")	com.fnIbsStatusChg(this, "D");

					//주소팝업
					if(obj.col === "addrFullDoro"){
						var addrDiv = sheetCeo.getValue(rowData, "addrDiv"); //주소구분
						if(addrDiv !== "" && addrDiv !== undefined){
							fnAddrSerch('03');		//팝업 타입 저장(01: 주사무소, 02:사업장, 03: 대표자)
						}else {
							alert("표출할 주소구분값을 선택해주세요. (도로명 혹은 지번)");
							return;
						}
					};
				});

				//sheetPerson 원클릭 처리
				sheetPerson.bind("onAfterClick" , function(obj) { //원클릭
					if(obj.kind === "Filter") return;
					var rowData = this.getFocusedRow(); //생성된 행 정보 가져오기

					//삭제상태변경
					if(obj.col === "delChk")	com.fnIbsStatusChg(this, "D");
				});

			});

			//그리드양식 수정(컬럼 다 보이기, 수정가능)
			var fnMakeModOpt = function(gridOptList, hideList, telFormatCos = []){
				//console.log(gridOptList);
				$.each(gridOptList, function(idx, item){
					//체크박스 기본값 설정
					if(item.Type === "Bool"){
						item.TrueValue = "Y";
						item.FalseValue = "N";
					}

					//DB저장된 그리드 컬럼들 숨겨둔것들 보이게 하기(기본 상세값 기준으로 저장해둬서 수정페이지에 맞게 기본값 변경)
					if(!hideList.includes(item.Name)){
						if(item.CanEdit === 0)	item.CanEdit = 1;	//수정가능하게
						if(item.Visible === 0)	item.Visible = 1;	//보이게
					}

					//입력시 전화번호 형식으로 변환, 글자수 제한
					if(telFormatCos.includes(item.Name)){
						item.CustomFormat = com.makeTelNoReturn; //선택 컨트롤러 추가
						item.Size = 13;	//13자리
					}
				});
			}

			//select 선택 컨트롤
			var fnAddrDivCng = function(evtParam) {
			    var targetVal = evtParam.sheet.getValue({row:evtParam.row,col:evtParam.col})
			    sheetCeo.setValue({row:evtParam.row, col:"addrFullDoro", val:""});
			}

			//검색
			var fnSearchGrid = function(){
			    //화면 처리 (조합원 정보 조회)
				var selectParam = { membNo : /*[[${paramMap.membNo}]]*/, sMembNo: /*[[${paramMap.membNo}]]*/, atthType : $("#atthType").val() };
				obj = {url:"/memb/selectMemb.do", param:selectParam, callBack:fnSelectCallBack, msgYn:"N", sessYn:"Y", loadYn:"Y"};
				com.fnAjaxDef(obj);
			};

			//조합원 정보 조회 콜백
			var fnSelectCallBack = function(resData){
				//console.log(resData);
				var data = resData.data;

				//기본 데이터
				com.fnSetKeyVal(data);

				//checkBox 관련
				com.checkBoxCheckValue(data.knowCds, "knowCd");			//알게된 사유
				com.checkBoxCheckValue(data.subBussCds, "subBussCds");	//보조장르
				com.checkBoxCheckValue(data.investViewYn, "investViewYn");	//미출자표시여부

				//기타 관련
				if($("input[name=subBussCds][value=14]").is(":checked"))	$("#bussEtc").prop("disabled", false);

				//시트값 설정
				sheetCeo.loadSearchData(resData.ceoList);		//대표자정보
				sheetPerson.loadSearchData(resData.personList);	//담당자정보
				sheetAcc.loadSearchData(resData.bankHistList);	//계좌정보

				//파일첨부
				fnIbsUploadViewOne(resData.fileList);

				//거래은행 변경이력 버튼
				//if(resData.bankHistList.length > 0) $("#bankHistBtn").show();

				$("input[name=addrDiv][value="+resData.data.addrDiv+"]").prop("checked", true);
				$("input[name=bussAddrDiv][value="+resData.data.bussAddrDiv+"]").prop("checked", true);
				$("input[name=ceoAddrDiv][value="+resData.data.ceoAddrDiv+"]").prop("checked", true);

				//조합원 상태에 따른 정지일자, 사유 보여주기
				if($("#membStat").val() === "80") {
					$("#workStop").show();
				} else{
					$("#workStop").hide();
				}
				
				//우량여부체크
				$('input:radio[name="superYnChk"]:input[value="'+data.superYn+'"]').prop('checked',true);
				
				//메뉴탭 조합원명세팅
				let tabObj = {target: $("#membNm").text()}
				com.fnSetTabMembTag(tabObj);

			}


			//파일업로드(등록/조회) - 단건
			//미리보기(파일보기 팝업) 버튼 때문에 공통사용 안하고 재정의
			var fnIbsUploadViewOne = function(list){
				$.each(list, function(idx, item){
					//변수선언
					var setData = {name: item.fileOrgNm, size: item.fileSize, date: item.submitDt, url: item.atthType +":"+ item.atthNo +":"+ item.atthSeq};
					//리스트 객체에 파일정보 담기
					var setList = [setData];
					//객체 files 에 파일목록 담기
					var setObj = {files: setList};

					$("#docFile"+item.docCd+"_showBtn").show();	//미리보기 버튼 보여주기
					$("#docFile"+item.docCd).IBUpload(setObj);
				});
			}

			//사용인감, 개인인감 미리보기(파일보기) 팝업
			var fnShowSealPop = function(docCd){
				var fileInfo = $("#docFile"+docCd).IBUpload('fileList')[0];
				if(fileInfo === undefined) {	//파일 정보 없으면 팝업 안띄우기
					alert("파일이 존재하지 않습니다.");
					$("#docFile"+docCd+"_showBtn").hide();	//미리보기 버튼 숨기기
					return;
				}

				$("#paramFilePath").val(fileInfo.url);	//인감조회 팝업에서 접근하여 사용중
				$("#paramFileName").val(fileInfo.name);	//인감조회 팝업에서 접근하여 사용중
				com.dialpopupOpen("인감조회", "/index/pageCall.do?menuCd=1070704", "580", "450"); //menuPage=/memb/popupSealView
			}


			//저장
			var fnSave = function(){

				//필수체크
				var valChks = ["membNm", "bizNo1", "bizNo2", "bizNo3", "ceoNm", "membStat", "membDiv", "doroAddr", "telNo", "bussStartDt", "joinDt", "compEmail", "histReason"];

				//조합원 구분이 법인이면 법인번호 필수로 추가
				if($("#membDiv").val() === "C")	valChks.push(...["lawNo1", "lawNo2"]);

				if(com.fnValChk(valChks)){
					//대표자정보 필수사항 체크
					if(sheetCeo.getSaveJson().Message && sheetCeo.getSaveJson().Message === "RequiredError"){
						alert("대표자정보 필수사항을 확인해주세요.")
						return;
					}
					//담당자정보 필수사항 체크
					if(sheetPerson.getSaveJson().Message && sheetPerson.getSaveJson().Message === "RequiredError"){
						alert("담당자정보 필수사항을 확인해주세요.")
						return;
					}

					//추가체크
					if(($("#membStat").val()==="90") && ($("#leaveDt").val()==="")){
				        alert("탈퇴시 탈퇴일자는 필수입니다");
				        $("#leaveDt").focus();
				        return;
				    }

					if(confirm("저장 처리 하시겠습니까?")){
						//첨부파일 첨부한 순서 코드따오기 (물리적저장순서 맞춰야해서 필수)
					    com.fnGetModCds("docFile");

						//전화번호 자동완성 기능때문에 추가
					    //전화번호 형식으로 저장(그리드는 보여주는 포멧만 전화번호형식으로 보여주고, 실제 저장값은 포멧 제외한 숫자로만 리턴되서 변환작업)
					    //기존에 전화번호 형식을 ###-####-####등 '-'를 포함하여 저장하고 있었어서 다른곳 호출시에 문제 없도록 그대로저장

						//대표자 전화번호 형식 데이터 변환
						var membCeoJson =  sheetCeo.getSaveJson();
						$.each(membCeoJson.data ,function(idx, item){
							if(item.STATUS != "Deleted"){	//삭제는 해줄필요 없음
								for(var key in item){	//전화번호 형식변환이 필요하면 찾아서 변환
									if(ceoTelFormatCols.includes(key)) {
										if(!com.fnIsEmpty(item[key])) 	item[key] = com.makeTelNoReturn(item[key]);
									}
								}
							}
						});

						//담당자 전화번호 형식 데이터 변환
						var membPersJson =  sheetPerson.getSaveJson();
						$.each(membPersJson.data ,function(idx, item){
							if(item.STATUS != "Deleted"){	//삭제는 해줄필요 없음
								for(var key in item){	//전화번호 형식변환이 필요하면 찾아서 변환
									if(persTelFormatCols.includes(key))	{
										if(!com.fnIsEmpty(item[key])) 	item[key] = com.makeTelNoReturn(item[key]);
									}
								}
							}
						});
						
						$("#superYn").val($("input[name='superYnChk']:checked").val());
						
						//param = {기본정보 + 수정사유, 대표자정보, 담당자정보}
						var param = { memb: $("#saveFrm").serializeObject(), membCeo: membCeoJson, membPerson: membPersJson };
						obj = {url:"/memb/updateMemb.do", jParam:param, fileId:"docFile", callBack:fnSaveCallBack, msgYn:"Y", sessYn:"Y", loadYn:"Y"};
						com.fnAjaxMulti(obj);
					}
				}
			};

			//저장콜백
			var fnSaveCallBack = function(resData){
				parent.closeMenu(/*[[${menuInfo.menuIdx}]]*/, /*[[${menuInfo.refMenuIdx}]]*/);
			};


			//변경이력
			var fnBankHistPop = function(){
				com.dialpopupOpen("계좌변경이력", "/index/pageCall.do?menuCd=1070705", "580", "500"); //menuPage=/memb/popupMembBankHist
			}

			//주소 팝업 열기
			var addrTagt = "";
			var fnAddrSerch = function(tagt){
				addrTagt = tagt;
				com.fnAddrSerch('popup');
			}

			//주소 검색 콜백
			var fnAddrCallBack = function(resData){
				//addrPopGubun(01: 주사무소, 02:사업장, 03: 대표자)
				if(addrTagt === "01"){	//주사무소

					$("#postNo").val(resData.zipNo); //우편
					$("#doroCd").val(resData.rnMgtSn); //도로코드
					$("#doroNm").val(resData.roadAddrPart1); //도로명
					$("#doroBunho").val(resData.doroBunho); //도로번지
					$("#doroDong").val(resData.emdNm); //주소동
					$("#doroBdNo").val(resData.doroBdNo); //주소번지

					$("#addrFullDoro").val(resData.roadAddrPart1 + "(" + resData.emdNm + " " + resData.doroBdNo + ")"); //주소번지
					$("#addr1").val(resData.jibunAddr);

				}else if(addrTagt === "02"){	//사업장

					$("#bussPostNo").val(resData.zipNo); //우편
					$("#bussDoroCd").val(resData.rnMgtSn); //도로코드
					$("#bussDoroNm").val(resData.roadAddrPart1); //도로명
					$("#bussDoroBunho").val(resData.doroBunho); //도로번지
					$("#bussDoroDong").val(resData.emdNm); //주소동
					$("#bussDoroBdNo").val(resData.doroBdNo); //주소번지

					$("#bussAddrFullDoro").val(resData.roadAddrPart1 + "(" + resData.emdNm + " " + resData.doroBdNo + ")"); //주소번지
					$("#bussAddr1").val(resData.jibunAddr);

				}else if(addrTagt === "03"){	//대표자정보 주소
					rowData = sheetCeo.getFocusedRow(); //생성된 행 정보 가져오기

					sheetCeo.setValue(rowData, "ceoPostNo", resData.zipNo); //우편
					sheetCeo.setValue(rowData, "doroCd", resData.rnMgtSn); //도로코드
					sheetCeo.setValue(rowData, "doroNm", resData.roadAddrPart1); //도로명
					sheetCeo.setValue(rowData, "doroBunho", resData.doroBunho); //도로번지
					sheetCeo.setValue(rowData, "doroDong", resData.emdNm); //주소동
					sheetCeo.setValue(rowData, "doroBdNo", resData.doroBdNo); //주소번지

					//주소팝업에서 풀주소 세팅할
					var addrDiv = sheetCeo.getValue(rowData, "addrDiv"); //주소구분
					if(addrDiv === "DR") {
						sheetCeo.setValue(rowData, "addrFullDoro", resData.roadAddrPart1 + "(" + resData.emdNm + " " + resData.doroBdNo + ")"); //주소번지
					}
					if(addrDiv === "JB") {
						//console.log(resData);
						sheetCeo.setValue(rowData, "addrFullDoro", resData.jibunAddr); //주소번지
					}

					sheetCeo.setValue(rowData, "ceoAddr1", resData.jibunAddr); //지번주소
					//지번상세주소는 doroDtl (상세주소 입력 공통으로 사용)
				}

				addrPopGubun = "";	//전역변수 조기화
			}

			//행 추가
			var fnRowAdd = function(sheet){
				initData = {membNo: /*[[${paramMap.membNo}]]*/, exprYn:1};
				com.fnIbsRowAdd("pre", initData, sheet);
			};

			//조합원 상태 변경
			var fnMembStatChg = function(obj) {
				if(obj === "80") {
					$("#workStop").show();
				} else {
					$("#workStop").hide();
				}
			}

			/*]]>*/

		</script>

		<!-- 콘텐츠 시작 -->
		<div class="contentsArea">
			<div class="contentsTop">
				<div th:insert="~{/fragments/subTitle}"></div>

				<!--title 버튼 영역-->
				<div class="topBtnsWrap">
					<!--오른쪽접기화면 컨트롤 버튼-->
					<div class="collapseCtrl">
						<button type="type" class="btn-collapse down"><span></span></button>
<!--						<button type="type" class="btn-collapse close"><span></span></button>-->
						<button type="type" class="reLoadFrm"></button>
					</div>
				</div>
			</div><!-- //contentsTop -->
			<form name="saveFrm" id="saveFrm" method="post" onSubmit="return false">
			<input type="hidden" name="reqNo" id="reqNo" value="">
			<input type="hidden" name="atthType" id="atthType" th:value="${menuInfo.atthType}"/>
			<input type="hidden" name="atthNo" id="atthNo"/>
			<input type="hidden" name="modFileCds" id="modFileCds" />
			<input type="hidden" name="paramFilePath" id="paramFilePath" />	<!-- 인감조회 팝업에서 파일이미지 찾는용도 -->
			<input type="hidden" name="paramFileName" id="paramFileName" />	<!-- 인감조회 팝업에서 파일이름 보여주는 용도 -->
			<input type="hidden" name="superYn" id="superYn" />
			<div class="contents flex">
				<div class="layer-flex collapseArea">

					<!-- 그리드 좌측 부분 -->
					<div class="collapseBox" style="width:50%">
						<section class="area mt5">
							<div class="fl">
								<h4 class="title">기본정보</h4>
							</div>
						</section>
						<table class="tbl">
							<colgroup>
								<col style="width:70px;">
								<col style="width:70px;">
								<col style="width:220px;">
								<col style="width:80px;">
								<col style="width:220px;">
							</colgroup>
							<tbody>
								<tr>
									<th colspan="2"><span class="reqMark">*</span>조합원번호/명</th>
									<td>
										<input type="text" name="membNo" id="membNo" value="" readonly="readonly" style="width: 40px;" maxlength="4" title="조합원번호"/>
										<input type="search" name="membNm" id="membNm" size="20" value="" style="width: 70%; max-width:200px;" maxlength="40" title="조합원명"/>
									</td>
									<th ><span class="reqMark">*</span>주대표자</th>
									<td><input name="ceoNm" type="search" id="ceoNm" size="8" value="" maxlength="20" /></td>
								</tr>
								<tr>
									<th colspan="2"><span class="reqMark">*</span>사업자번호</th>
									<td>
										<input type="search" name="bizNo1" id="bizNo1" size="3" maxlength="3" value="" style="float:none; width:50px;" title="사업자번호" onkeyup="com.fnOnlyNum(this);"/>
					                    -
					                    <input type="search" name="bizNo2" id="bizNo2" size="2" maxlength="2" value="" style="float:none; width:40px;" title="사업자번호" onkeyup="com.fnOnlyNum(this);"/>
					                    -
					                    <input type="search" name="bizNo3" id="bizNo3" size="5" maxlength="5" value="" style="float:none; width:65px;" title="사업자번호" onkeyup="com.fnOnlyNum(this);"/>
									</td>
									<th>법인번호</th>
									<td>
										<input type="search" name="lawNo1" id="lawNo1" size="6" maxlength="6" value="" style="float:none; width:70px;" title="법인번호" onkeyup="com.fnOnlyNum(this);"/>
					                    -
					                    <input type="search" name="lawNo2" id="lawNo2" size="7" maxlength="7" value="" style="float:none; width:80px;" title="법인번호" onkeyup="com.fnOnlyNum(this);">
									</td>
								</tr>
								<tr>
									<th colspan="2">조기경보</th>
									<td colspan="3">
										<select name="membCretop" id="membCretop" style="width:140px" title="조기경보">
										<input type="search" name="memo" id="memo" size="80" maxlength="50" value="" style="max-width:400px;"/>
									</td>
								</tr>
								<tr>
									<th colspan="2"><span class="reqMark">*</span>조합원상태</th>
									<td><select name="membStat" id="membStat" style="width:100px" title="조합원상태" onchange="fnMembStatChg(this.value);"></td>
									<th><span class="reqMark">*</span>조합원구분</th>
									<td><select name="membDiv" id="membDiv" style="width:100px" title="조합구분"></td>
								</tr>
								<tr id="workStop">
									<th colspan="2">업무정지일자</th>
									<td>
										<input type="search" name="workStopDt" id="workStopDt" value="" maxlength="10"  title="업무정지일자" style="width:100px" onkeyup="com.fnOnlyNum(this);com.fnDateMakeForm(this)" onblur="com.fnDateValiChk(this);"/>
										<img src="../images/icon_calendar.png" class="calendar-box" onclick="calendar(this, 'workStopDt', 'yyyy-mm-dd')" />
									</td>
									<th>업무정지사유</th>
									<td><input type="text" name="workStopReason" id="workStopReason" maxlength="100" value="" /></td>
								</tr>
								<tr>
									<th rowspan="3">주사무소<br>(본사)</th>
									<th><span class="reqMark">*</span>주소</th>
									<td colspan="3">
										<!--<input type="hidden" name="addrDiv" value="DR" />-->
										<input type="hidden" name="doroCd" id="doroCd" title="" />
										<input type="hidden" name="doroNm" id="doroNm" title="" />
										<input type="hidden" name="doroBunho" id="doroBunho" title="" />
										<input type="hidden" name="doroDong" id="doroDong" title="" />
										<input type="hidden" name="doroBdNo" id="doroBdNo" title="" />
										<ul>
											<li>
												<label><input type="radio" name="addrDiv" value="DR" class="input1"><span>도로</span></label>
												<input type="search" name="postNo" id="postNo" title="우편번호" style="width:60px" readonly/>
												<button type="button" class="btn icoSearch" onclick="fnAddrSerch('01');">주소검색</button>
												<input type="search" name="addrFullDoro" id="addrFullDoro" title="도로주소" style="width:220px;" readonly/>
												<input type="search" name="doroDtl" id="doroDtl" title="도로상세" style="width:130px;" maxlength="50" />
											</li>
											<li class="mt3">
												<!--지번주소-->
												<label><input type="radio" name="addrDiv" value="JB" class="input1" ><span>지번</span></label>
												<!--<input type="text" name="addrFull" id="addrFull" title="지번주소" style="width:400px;" readonly/>-->
												<input type="text" name="addr1" id="addr1" title="" style="width:315px;" readonly/>
												<input type="search" name="addr2" id="addr2" title="" style="width:130px;" maxlength="50" />
											</li>
										</ul>
									</td>
								</tr>
								<tr>
									<th><span class="reqMark">*</span>전화번호</th>
									<td>
										<input type="search" name="telNo" id="telNo" size="14" maxlength="14" value="" title="전화번호" onkeyup="com.fnOnlyNum(this);com.makeTelNo(this)" style="width:140px"/>
									</td>
									<th>팩스번호</th>
									<td>
										<input type="search" name="faxNo" id="faxNo" size="14" maxlength="14" value="" onkeyup="com.fnOnlyNum(this);com.makeTelNo(this)" style="width:140px"/>
									</td>
								</tr>
								<tr>
									<th>홈페이지</th>
									<td colspan="3">
										<input type="text" name="homepage" id="homepage" size="25" maxlength="50" value="" style="width:190px"/>
									</td>
								</tr>

								<tr>
									<th rowspan="3">사업장<br>(공장,<br>지점)</th>
									<th>주소</th>
									<td colspan="3">
										<!--<input type="hidden" name="bussAddrDiv" value="DR" />-->
										<input type="hidden" name="bussDoroCd" id="bussDoroCd" title="" />
										<input type="hidden" name="bussDoroNm" id="bussDoroNm" title="" />
										<input type="hidden" name="bussDoroBunho" id="bussDoroBunho" title="" />
										<input type="hidden" name="bussDoroDong" id="bussDoroDong" title="" />
										<input type="hidden" name="bussDoroBdNo" id="bussDoroBdNo" title="" />
										<ul>
											<li>
												<label><input type="radio" name="bussAddrDiv" value="DR" class="input1"><span>도로</span></label>
												<input type="search" name="bussPostNo" id="bussPostNo" title="우편번호" style="width:60px" readonly/>
												<button type="button" class="btn icoSearch" onclick="fnAddrSerch('02');">주소검색</button>
												<input type="search" name="bussAddrFullDoro" id="bussAddrFullDoro" title="도로주소" style="width:220px;" readonly/>
												<input type="search" name="bussDoroDtl" id="bussDoroDtl" title="도로상세" style="width:130px;" maxlength="50"/>
											</li>
											<li class="mt3">
												<!--지번주소-->
												<label><input type="radio" name="bussAddrDiv" value="JB" class="input1" ><span>지번</span></label>
												<input type="text" name="bussAddr1" id="bussAddr1" title="" style="width:315px;" readonly/>
												<input type="search" name="bussAddr2" id="bussAddr2" title="" style="width:130px;" maxlength="50"/>
											</li>
										</ul>
									</td>
								</tr>
								<tr>
									<th>전화번호</th>
									<td>
										<input type="search" name="bussTelNo" id="bussTelNo" size="13" maxlength="13" value="" onkeyup="com.fnOnlyNum(this);com.makeTelNo(this)" style="width:140px"/>
									</td>
									<th>팩스번호</th>
									<td>
										<input type="search" name="bussFaxNo" id="bussFaxNo" size="13" maxlength="13" value="" onkeyup="com.fnOnlyNum(this);com.makeTelNo(this)" style="width:140px"/>
									</td>
								</tr>
								<tr>
									<th>홈페이지</th>
									<td colspan="3">
										<input type="search" name="bussHomepage" id="bussHomepage" size="25" maxlength="50" value="" style="width:190px"/>
									</td>
								</tr>
								<tr>
									<th colspan="2"><span class="reqMark">*</span>회사이메일</th>
									<td><input type="search" name="compEmail" id="compEmail" size="28" maxlength="30" value=""  title="회사이메일" style="max-width:200px;"/></td>
									<th>우편수령처</th>
									<td><select name="postGetCd" id="postGetCd" style="width:140px" title="우편수령처"></select></td>
								</tr>
								<tr>
									<th colspan="2"><span class="reqMark">*</span>사업게시일</th>
									<td>
										<input type="search" name="bussStartDt" id="bussStartDt" maxlength="10" value="" title="사업게시일" style="width:100px" onkeyup="com.fnOnlyNum(this);com.fnDateMakeForm(this)" onblur="com.fnDateValiChk(this);"/>
										<img src="../images/icon_calendar.png" class="calendar-box" onclick="calendar(this, 'bussStartDt', 'yyyy-mm-dd')" />
									</td>
									<th>조합원형태</th>
									<td><select name="membCd" id="membCd" style="width:100px" title="조합원형태"></select></td>
								</tr>
								<tr>
									<th colspan="2"><span class="reqMark">*</span>가입일자</th>
									<td>
										<input type="search" name="joinDt" id="joinDt" maxlength="10" value="" title="가입일자" style="width:100px" onkeyup="com.fnOnlyNum(this);com.fnDateMakeForm(this)" onblur="com.fnDateValiChk(this);"/>
										<img src="../images/icon_calendar.png" class="calendar-box" onclick="calendar(this, 'joinDt', 'yyyy-mm-dd')" />
									</td>
									<th>탈퇴일자</th>
									<td>
										<input type="search" name="leaveDt" id="leaveDt" maxlength="10" value="" title="탈퇴일자" style="width:100px" onkeyup="com.fnOnlyNum(this);com.fnDateMakeForm(this)" onblur="com.fnDateValiChk(this);"/>
										<img src="../images/icon_calendar.png" class="calendar-box" onclick="calendar(this, 'leaveDt', 'yyyy-mm-dd')" />
									</td>
								</tr>
								<tr>
									<th colspan="2">제재여부</th>
									<td><select name="sactCd" id="sactCd" style="width:100px" title="제재여부"></select></td>
									<th>제재일자</th>
									<td>
										<input type="search" name="sactDt" id="sactDt" maxlength="10" value="" title="제재일자" style="width:100px" onkeyup="com.fnOnlyNum(this);com.fnDateMakeForm(this)" onblur="com.fnDateValiChk(this);"/>
										<img src="../images/icon_calendar.png" class="calendar-box" onclick="calendar(this, 'sactDt', 'yyyy-mm-dd')" />
									</td>
								</tr>
								<tr>
									<th colspan="2"><span class="reqMark">*</span>주장르</th>
									<td>
										<select name="mainBussCd" id="mainBussCd" style="width:120px" title="주장르"></select>
									</td>
									<th><span class="reqMark">*</span>우량여부</th>
									<td>
										여 : <input type="radio" name="superYnChk" id="superYnChk" value="Y">
										부 : <input type="radio" name="superYnChk" id="superYnChk" value="N" >
									</td>
								</tr>
								<tr>
									<th colspan="2">보조장르</th>
									<td colspan="3">
										<span id="span_subBussCds"></span>
										(<input type='search' name='bussEtc' id='bussEtc' size='50' maxlength='100' value="" style="width:140px; float:none;" disabled/>)
									</td>
								</tr>
								<tr>
									<th colspan="2">사용인감</th>
									<td colspan="2" style="border-right:0;">
										<input type="hidden" name="docCd" value="CS" />
										<div id="docFileCS" style="width:100%;"></div>
									</td>
									<td style="border-left:0;">
										<button type="button" id="docFileCS_showBtn" onclick="javascript:fnShowSealPop('CS');" class="btn small style08" style="display: none;">파일보기</button>
									</td>
								</tr>
								<tr>
									<th colspan="2">개인인감</th>
									<td colspan="2" style="border-right:0;">
										<input type="hidden" name="docCd" value="PS" />
										<div id="docFilePS" style="width:100%;"></div>
									</td>
									<td style="border-left:0;">
										<button type="button" id="docFilePS_showBtn" onclick="javascript:fnShowSealPop('PS');" class="btn small style08" style="display: none;">파일보기</button>
									</td>
								</tr>
							</tbody>
						</table>

						<!-- 대표자 정보 -->
						<section class="area mt5">
							<div class="fl">
								<h4 class="title">대표자정보</h4>
							</div>
							<div class="fr">
								<button type="button" onclick="javascript:fnRowAdd(sheetCeo);" class="btn small style08">행추가</button>
								<button type="button" onclick="javascript:com.fnIbsRowDel(sheetCeo);" class="btn small style08">행삭제</button>
								<!--<button type="button" onclick="javascript:com.fnIbsSave('/memb/saveMembCeo.do', sheetCeo);" class="btn small style07">저장</button>-->
							</div>
						</section>
						<div id="sheetDivCeo" style="width:100%;height:170px"></div>

						<!-- 조합걔좌 정보 -->
						<section class="area mt5">
							<div class="fl">
								<h4 class="title">계좌정보</h4>
							</div>
						</section>
						<div id="sheetDivAcc" style="width:100%;height:170px"></div>
						<div style="font-size: 11px; margin-top: 3px;">조합원계좌는 조합원업무 > 조합원관리 > 조합원계좌관리 메뉴에서 관리하실 수 있습니다.</div>
					</div>

					<!-- 그리드 우측 부분 시작 -->
					<!--여긴 영역 감싼 버전으로 -->
					<!--fixScroll 스크롤 넣으면 안쪽영역으로 -->
					<div class="collapseBox fixable" style="width:49%">
						<div class="wrapBox">

							<section class="area mt5">
								<div class="fl">
									<h4 class="title">추가정보</h4>
								</div>
							</section>
							<table class="tbl">
								<colgroup>
									<col style="width:90px;">
									<col style="width:180px;">
									<col style="width:90px;">
									<col style="width:160px;">
									<col style="width:80px;">
									<col style="width:180px;">
								</colgroup>
								<tbody>
									<tr>
										<th>자산총액</th>
										<td>
											<input type="search" name="assetAmt" id="assetAmt" size="17" maxlength="19" onkeyup="com.fnOnlyNum(this);com.makeComma(this);" value="" style="width:80%;"/> 원
										</td>
										<th>자본금총액</th>
										<td>
											<input type="search" name="capiAmt" id="capiAmt" size="17" maxlength="19" onkeyup="com.fnOnlyNum(this);com.makeComma(this);" value="" style="width:80%; max-width: 200px;"/> 원
										</td>
										<th>종업원수</th>
										<td>
											<input type="search" name="empCnt" id="empCnt" size="5" maxlength="6" onkeyup="com.fnOnlyNum(this);com.makeComma(this);" value="" style="width:80%;"/> 명
										</td>
									</tr>
									<tr>
										<th>년매출액</th>
										<td>
											<input type="search" name="yearSaleAmt" id="yearSaleAmt" size="17" maxlength="19" onkeyup="com.fnOnlyNum(this);com.makeComma(this);" value="" style="width:80%;"/> 원
										</td>
										<th>주생산품</th>
										<td>
											<input type="search" name="mainProd" id="mainProd" size="20" maxlength="100" value=""/>
										</td>
										<th>업태</th>
										<td>
											<input type="search" name="bussCond" id="bussCond" size="60" maxlength="100" value=""/>
										</td>
									</tr>
									<tr>
										<tr>
											<th>소속협회</br>/단체</th>
											<td colspan="3"><textarea name="belong" id="belong" cols="65" rows="2"></textarea></td>
											<th>미출자<br/>표시여부</th>
											<td><input type="checkbox" name="investViewYn" value="Y" /> (조합원현황에 표시)</td>
										</tr>
									</tr>
									<!--<tr>
										<th>거래은행</th>
										<td>
											<select name="bankCd" id="bankCd" style="width:140px" title="거래은행"></select>
											<button type="button" id="bankHistBtn" onclick="javascript:fnBankHistPop();" class="btn small style08" style="display: none;">변경이력</button>
										</td>
										<th>계좌번호</th>
										<td>
											<input type="search" name="acctNo" id="acctNo" size="15" maxlength="30" value=""/>
										</td>
										<th>예금주</th>
										<td>
											<input type="search" name="depoNm" id="depoNm" size="8" maxlength="50" value="" style="max-width: 200px;"/>
										</td>
									</tr>-->
									<tr>
										<th>신용카드<br/>사용여부</th>
										<td>
											<select name="cardYn" id="cardYn" style="width:100px;">
											    <option value="N">미사용</option>
											    <option value="Y">사용</option>
											</select>
										</td>
										<th>부서</th>
										<td colspan="3"><select name="dept" id="dept" style="width:100px" title="부서"></select></td>
									</tr>
									<tr>
										<th>알게된 사유</th>
										<td colspan="5">
											<div id="ele_checkBoxCm01" title="체크세로1" style="float:left; margin-left:10px;">
												<input type="checkbox" name="knowCd" id="knowCd1" value="1">
												&nbsp;&nbsp;인터넷검색&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
												<br>
												<input type="checkbox" name="knowCd" id="knowCd2" value="2">
												&nbsp;&nbsp;지인 추천&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
												<br>
												<input type="checkbox" name="knowCd" id="knowCd3" value="3">
												&nbsp;&nbsp;콘텐츠 관련기관 추천&nbsp;&nbsp;&nbsp;&nbsp;
												<br>
											</div>

											<div id="ele_checkBoxCm01" title="체크세로1" style="float:left; margin-left:10px;">
												(검색어 :
												<input type="search" name="webKeyword" id="webKeyword" size="20" maxlength="25" value="" style="width:150px; float:none; margin-left:0px;"/>
												)
												<br>
												(추천인 :
												<input type="search" name="recPers" id="recPers" size="20" value="" maxlength="20" style="width:150px; float:none; margin-left:0px;"/>
												)
												<br>
												(추천인 :
												<input type="search" name="recComp" id="recComp" size="20" value="" maxlength="20" style="width:150px; float:none; margin-left:0px;"/>
												)
												<br>
											</div>

											<div id="ele_checkBoxCm01" title="체크세로1" style="float:left; margin-left:10px;">
												<input type="checkbox" name="knowCd" id="knowCd4" value="4">
												&nbsp;&nbsp;조합 홍보물&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
												<br>
												<input type="checkbox" name="knowCd" id="knowCd5" value="5">
												&nbsp;&nbsp;언론보도&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
												<br>
												<input type="checkbox" name="knowCd" id="knowCd6" value="6">
												&nbsp;&nbsp;기타&nbsp;(<input type="search" name="etcCont" id="etcCont" size="20" maxlength="25" value="" style="width:200px; float:none; margin-left:0px;"/>)
												<br>
											</div>
										</td>
									</tr>
									<tr>
										<th>비고</th>
										<td colspan="5"><textarea name="remark" id="remark" cols="100" rows="2"></textarea></td>
									</tr>
								</tbody>
							</table>


							<!-- 담당자 정보 -->
							<section class="area mt5">
								<div class="fl">
									<h4 class="title">담당자정보</h4>
								</div>
								<div class="fr">
									<button type="button" onclick="javascript:fnRowAdd(sheetPerson);" class="btn small style08">행추가</button>
									<button type="button" onclick="javascript:com.fnIbsRowDel(sheetPerson);" class="btn small style08">행삭제</button>
								</div>
							</section>
							<div id="sheetDivPerson" style="width:100%;height:385px"></div>

							<!-- 수정사유 -->
							<section class="area mt5">
								<div class="fl">
									<h4 class="title">수정사유</h4>
								</div>
								<div>
									<textarea id="histReason" name="histReason" title="수정사유" cols="10" rows="5"></textarea>
								</div>
							</section>
						</div>
					</div>
					<!-- END 컨텐츠 영역 -->
				</div>

				<!-- 처리 버튼 영역 -->
				<div class="layer-flex mt50">
					<div class="" style="width:100%">
						<section class="area">
							<div class="fc">
								<button type="button" onclick="javascript:fnSave();" class="btn style07">수정</button>
								<!--<button type="button" onclick="javascript:fnSearchGrid();" class="btn style01">조회</button>-->
							</div>
						</section>
					</div>
				</div>
				<!-- 처리 버튼 영역 끝-->
			</div><!-- //contents -->
			</form>
		</div><!-- //contentsArea -->
	</body>
</html>
